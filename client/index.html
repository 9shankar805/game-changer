<!doctype html>
<html lang="en">
  <head>
    <title>Siraha Bazaar - Online Shopping & Food Delivery in Siraha</title>

    <!-- Google Analytics - Development Environment -->
    <script>
      // Only load Google Analytics in production to prevent cookie warnings
      if (window.location.hostname !== 'localhost' && 
          !window.location.hostname.includes('replit.dev') && 
          !window.location.hostname.includes('preview.')) {
        // Google Tag Manager
        (function (w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
          var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
          j.async = true;
          j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
          f.parentNode.insertBefore(j, f);
        })(window, document, "script", "dataLayer", "GTM-NNHBBGTN");

        // Google tag (gtag.js)
        const gtagScript = document.createElement('script');
        gtagScript.async = true;
        gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-STBYNZT2SJ';
        document.head.appendChild(gtagScript);

        gtagScript.onload = function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());
          gtag("config", "G-STBYNZT2SJ");
        };
      } else {
        console.log('ðŸ”§ Google Analytics disabled in development environment');
      }
    </script>
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="google-site-verification"
      content="QAPIfRjxMbTzjLONbXJvxrmEhC7rbxXNizyVFJguXbM"
    />
    <!-- Google Search Console Verification - Replace with your actual verification code -->

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Siraha Bazaar is an online platform connecting you to the best shops, restaurants, and services in Siraha, Nepal. Fast shopping and food delivery."
    />
    <meta
      name="keywords"
      content="online shopping, food delivery, siraha, nepal, ecommerce, marketplace, local business"
    />
    <meta name="author" content="Siraha Bazaar Team" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph Tags for Social Media -->
    <meta property="og:title" content="Siraha Bazaar - Online Shopping & Food Delivery in Siraha" />
    <meta
      property="og:description"
      content="Siraha Bazaar is an online platform connecting you to the best shops, restaurants, and services in Siraha, Nepal. Fast shopping and food delivery."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sirahabazaar.com" />
    <meta property="og:image" content="/icon-512x512.png" />
    <meta property="og:site_name" content="Siraha Bazaar" />

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Siraha Bazaar - Online Shopping & Food Delivery in Siraha" />
    <meta
      name="twitter:description"
      content="Siraha Bazaar is an online platform connecting you to the best shops, restaurants, and services in Siraha, Nepal. Fast shopping and food delivery."
    />
    <meta name="twitter:image" content="/icon-512x512.png" />

    <!-- PWA Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#FF6B35" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Siraha Bazaar" />

    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-128x128.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icon-72x72.png" />
    <link rel="apple-touch-icon" href="/icon-192x192.png" />
    <link rel="preload" href="/icon-192x192.png" as="image" />

    <!-- Preconnect to external domains for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://www.googletagmanager.com" />

    <!-- Critical CSS for faster loading -->
    <style>
      /* Inline critical CSS for faster loading */
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background-color: #ffffff;
        color: #333333;
      }
      
      .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffffff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      
      .loading-container {
        position: relative;
        width: 80px;
        height: 80px;
        margin-bottom: 20px;
      }
      
      .loading-ring {
        position: absolute;
        inset: 0;
        border: 4px solid #f3f4f6;
        border-top: 4px solid #FF6B35;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      .loading-logo {
        position: absolute;
        inset: 0;
        width: 50px;
        height: 50px;
        margin: auto;
        object-fit: contain;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
      
      .loading-text {
        color: #059669;
        font-size: 18px;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
      <div class="loading-container">
        <div class="loading-ring"></div>
        <img src="/assets/icon2.png" alt="Siraha Bazaar" class="loading-logo" />
      </div>
      <div class="loading-text">Siraha Bazaar</div>
      <div style="color: #666; margin-top: 10px; font-size: 14px;">Loading...</div>
    </div>

    <!-- Root element for React -->
    <div id="root"></div>

    <!-- Firebase Cloud Messaging Service Worker -->
    <script>
      // Register service worker for FCM
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
          .then(function(registration) {
            console.log('Firebase Service Worker registered:', registration);
          })
          .catch(function(error) {
            console.error('Firebase Service Worker registration failed:', error);
          });
      }

      // Hide loading screen once React loads
      let reactLoaded = false;
      
      // Listen for React app ready signal
      window.addEventListener('react-ready', function() {
        reactLoaded = true;
        hideLoadingScreen();
      });
      
      // Fallback timeout
      setTimeout(function() {
        if (!reactLoaded) {
          hideLoadingScreen();
        }
      }, 3000);
      
      function hideLoadingScreen() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          loadingScreen.style.transition = 'opacity 0.3s ease';
          setTimeout(function() {
            loadingScreen.style.display = 'none';
          }, 300);
        }
      }
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNHBBGTN"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

    <!-- React App Entry Point -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>